import type { Company, CompanySummary, DatasetSummary, Money } from './types';

const usd = (amount: number): Money => ({ amount, currencyCode: 'USD' });

export const COMPANIES: Company[] = [
  {
    id: 'comp-abstract-industrial',
    name: 'Abstract Industrial Solutions',
    legalName: 'Abstract Industrial Solutions LLC',
    orderingStatus: 'approved',
    locationsCount: 3,
    mainContact: 'sarah.chen@abstractindustrial.com',
    totalOrders: 42,
    totalSales: 218_450.75,
    createdAt: '2023-04-12',
    lastOrderAt: '2024-09-08',
    paymentTerms: {
      type: 'net',
      netDays: 30,
      discountPercent: 2,
      description: 'Net 30 with 2% discount if paid within 10 days',
      creditLimit: usd(150_000),
    },
    contacts: [
      {
        id: 'contact-sarah-chen',
        firstName: 'Sarah',
        lastName: 'Chen',
        email: 'sarah.chen@abstractindustrial.com',
        phone: '+1-415-555-0147',
        role: 'finance',
        locationIds: ['loc-abstract-hq'],
        lastActiveAt: '2024-09-12T16:12:00Z',
      },
      {
        id: 'contact-luis-mendoza',
        firstName: 'Luis',
        lastName: 'Mendoza',
        email: 'luis.mendoza@abstractindustrial.com',
        phone: '+1-415-555-0172',
        role: 'buyer',
        locationIds: ['loc-abstract-west-hub'],
        lastActiveAt: '2024-09-10T08:42:00Z',
      },
      {
        id: 'contact-emily-johnson',
        firstName: 'Emily',
        lastName: 'Johnson',
        email: 'emily.johnson@abstractindustrial.com',
        role: 'approver',
        locationIds: ['loc-abstract-hq', 'loc-abstract-south-yard'],
        lastActiveAt: '2024-09-09T20:05:00Z',
      },
    ],
    locations: [
      {
        id: 'loc-abstract-hq',
        name: 'Headquarters',
        code: 'HQ',
        address: {
          company: 'Abstract Industrial Solutions',
          line1: '314 Arthur Drive',
          city: 'New York',
          province: 'NY',
          postalCode: '10001',
          country: 'United States',
        },
        phone: '+1-212-555-0184',
        email: 'hq@abstractindustrial.com',
        isDefaultBilling: true,
        isDefaultShipping: true,
      },
      {
        id: 'loc-abstract-west-hub',
        name: 'West Distribution Hub',
        code: 'WEST',
        address: {
          company: 'Abstract Industrial Solutions',
          line1: '980 Market Street',
          city: 'San Francisco',
          province: 'CA',
          postalCode: '94102',
          country: 'United States',
        },
        phone: '+1-415-555-0102',
        email: 'west-hub@abstractindustrial.com',
      },
      {
        id: 'loc-abstract-south-yard',
        name: 'Southern Service Yard',
        code: 'SOUTH',
        address: {
          company: 'Abstract Industrial Solutions',
          line1: '284 Peachtree Industrial Blvd',
          city: 'Atlanta',
          province: 'GA',
          postalCode: '30345',
          country: 'United States',
        },
        phone: '+1-404-555-0177',
        email: 'south-yard@abstractindustrial.com',
      },
    ],
    credit: {
      creditLimit: usd(150_000),
      creditUsed: usd(74_580),
      availableCredit: usd(75_420),
      daysPastDue: 0,
    },
    taxExempt: true,
    paymentMethods: [
      {
        id: 'pm-abstract-ach',
        type: 'ach',
        label: 'ACH •••• 2018 (Bank of America)',
        status: 'active',
        description: 'Auto-debit for invoices over $5,000',
        lastUsedAt: '2024-09-08T15:24:00Z',
        capabilities: ['Auto-pay', 'Same-day ACH'],
        isDefault: true,
      },
      {
        id: 'pm-abstract-card',
        type: 'card',
        label: 'Corporate Visa •••• 8842',
        status: 'active',
        lastUsedAt: '2024-08-18T18:42:00Z',
        capabilities: ['One-time payments'],
      },
      {
        id: 'pm-abstract-installments',
        type: 'installments',
        label: 'Installment plan eligibility',
        status: 'pending',
        description: 'Working capital review in progress (Net 30 baseline).',
        capabilities: ['Shop Pay Installments'],
      },
    ],
    notes: 'Flagship customer for the quote-to-pay pilot. Prefers consolidated invoices.',
  },
  {
    id: 'comp-lynx-supply',
    name: 'Lynx Supply Co.',
    legalName: 'Lynx Supply Incorporated',
    orderingStatus: 'pending',
    locationsCount: 2,
    mainContact: 'finance@lynxsupply.com',
    totalOrders: 15,
    totalSales: 86_320.4,
    createdAt: '2024-01-18',
    lastOrderAt: '2024-08-22',
    paymentTerms: {
      type: 'net',
      netDays: 45,
      description: 'Net 45 terms pending credit review',
      creditLimit: usd(80_000),
    },
    contacts: [
      {
        id: 'contact-hassan-kareem',
        firstName: 'Hassan',
        lastName: 'Kareem',
        email: 'hassan.kareem@lynxsupply.com',
        phone: '+1-312-555-0144',
        role: 'admin',
        locationIds: ['loc-lynx-hq'],
        lastActiveAt: '2024-09-05T13:25:00Z',
      },
      {
        id: 'contact-noelle-hart',
        firstName: 'Noelle',
        lastName: 'Hart',
        email: 'noelle.hart@lynxsupply.com',
        role: 'finance',
        locationIds: ['loc-lynx-hq'],
      },
    ],
    locations: [
      {
        id: 'loc-lynx-hq',
        name: 'Chicago Headquarters',
        code: 'CHI',
        address: {
          company: 'Lynx Supply Co.',
          line1: '811 W Fulton Market',
          city: 'Chicago',
          province: 'IL',
          postalCode: '60607',
          country: 'United States',
        },
        phone: '+1-312-555-0188',
        email: 'operations@lynxsupply.com',
        isDefaultBilling: true,
      },
      {
        id: 'loc-lynx-dallas',
        name: 'Dallas Distribution',
        code: 'DAL',
        address: {
          company: 'Lynx Supply Co.',
          line1: '411 Commerce Way',
          city: 'Dallas',
          province: 'TX',
          postalCode: '75201',
          country: 'United States',
        },
        phone: '+1-469-555-0155',
        email: 'dallas@lynxsupply.com',
        isDefaultShipping: true,
      },
    ],
    credit: {
      creditLimit: usd(80_000),
      creditUsed: usd(48_600),
      availableCredit: usd(31_400),
      daysPastDue: 14,
    },
    taxExempt: false,
    paymentMethods: [
      {
        id: 'pm-lynx-ach',
        type: 'ach',
        label: 'ACH •••• 1094 (First Midwest Bank)',
        status: 'active',
        description: 'Primary for net terms invoices',
        lastUsedAt: '2024-08-22T11:05:00Z',
        capabilities: ['Auto-pay'],
        isDefault: true,
      },
      {
        id: 'pm-lynx-wire',
        type: 'wire',
        label: 'Wire transfer instructions',
        status: 'active',
        description: 'Use when exceeding credit limit or rush orders',
        capabilities: ['Manual settlement'],
      },
    ],
    notes: 'Working through onboarding checklist; pending approval on payment terms extension.',
  },
  {
    id: 'comp-blue-hollow',
    name: 'Blue Hollow Resorts',
    legalName: 'Blue Hollow Hospitality Group',
    orderingStatus: 'approved',
    locationsCount: 4,
    mainContact: 'katherine@bluehollow.com',
    totalOrders: 68,
    totalSales: 302_910.55,
    createdAt: '2022-11-03',
    lastOrderAt: '2024-09-01',
    paymentTerms: {
      type: 'installments',
      description: 'Seasonal installment plan with ACH auto-debit',
      installmentOptions: [
        {
          id: 'installment-3-month',
          label: '3 monthly payments',
          durationMonths: 3,
          aprPercent: 4.5,
        },
        {
          id: 'installment-6-month',
          label: '6 monthly payments',
          durationMonths: 6,
          aprPercent: 6.2,
          minimumOrderAmount: usd(25_000),
        },
      ],
      creditLimit: usd(200_000),
    },
    contacts: [
      {
        id: 'contact-katherine-ruiz',
        firstName: 'Katherine',
        lastName: 'Ruiz',
        email: 'katherine.ruiz@bluehollow.com',
        role: 'buyer',
        locationIds: ['loc-blue-hq'],
        lastActiveAt: '2024-09-11T10:18:00Z',
      },
      {
        id: 'contact-oliver-sims',
        firstName: 'Oliver',
        lastName: 'Sims',
        email: 'oliver.sims@bluehollow.com',
        role: 'approver',
        locationIds: ['loc-blue-hq'],
      },
      {
        id: 'contact-lina-hassan',
        firstName: 'Lina',
        lastName: 'Hassan',
        email: 'lina.hassan@bluehollow.com',
        role: 'finance',
        locationIds: ['loc-blue-hq'],
      },
    ],
    locations: [
      {
        id: 'loc-blue-hq',
        name: 'Corporate Office',
        code: 'NYC',
        address: {
          company: 'Blue Hollow Resorts',
          line1: '200 Hudson Street',
          city: 'New York',
          province: 'NY',
          postalCode: '10013',
          country: 'United States',
        },
        phone: '+1-212-555-0140',
        email: 'corporate@bluehollow.com',
        isDefaultBilling: true,
      },
      {
        id: 'loc-blue-montauk',
        name: 'Montauk Resort',
        code: 'MTK',
        address: {
          company: 'Blue Hollow Resort - Montauk',
          line1: '14 Old Harbor Road',
          city: 'Montauk',
          province: 'NY',
          postalCode: '11954',
          country: 'United States',
        },
      },
      {
        id: 'loc-blue-aspen',
        name: 'Aspen Lodge',
        code: 'ASP',
        address: {
          company: 'Blue Hollow Lodge',
          line1: '520 Mountain View Rd',
          city: 'Aspen',
          province: 'CO',
          postalCode: '81611',
          country: 'United States',
        },
      },
      {
        id: 'loc-blue-sedona',
        name: 'Sedona Retreat',
        code: 'SED',
        address: {
          company: 'Blue Hollow Retreat',
          line1: '88 Cathedral Rock Trail',
          city: 'Sedona',
          province: 'AZ',
          postalCode: '86336',
          country: 'United States',
        },
        isDefaultShipping: true,
      },
    ],
    credit: {
      creditLimit: usd(200_000),
      creditUsed: usd(182_950),
      availableCredit: usd(17_050),
      daysPastDue: 0,
    },
    taxExempt: true,
    paymentMethods: [
      {
        id: 'pm-blue-ach',
        type: 'ach',
        label: 'ACH •••• 7761 (Coastal Credit)',
        status: 'active',
        description: 'Linked to seasonal installment plan',
        lastUsedAt: '2024-07-25T12:30:00Z',
        capabilities: ['Auto-pay', 'Installments'],
        isDefault: true,
      },
      {
        id: 'pm-blue-card',
        type: 'card',
        label: 'Amex •••• 3319',
        status: 'disabled',
        description: 'Temporarily disabled after limit reached',
        capabilities: ['One-time payments'],
      },
      {
        id: 'pm-blue-shop-pay',
        type: 'shop_pay',
        label: 'Shop Pay Installments',
        status: 'active',
        description: '6-month plan enabled for resort refresh orders',
        capabilities: ['Split payments', 'Buyer self-service'],
      },
    ],
    notes: 'Hospitality client leveraging seasonal assortment bundles and installment payments.',
  },
];

export const COMPANY_INDEX: CompanySummary[] = COMPANIES.map(
  ({ id, name, orderingStatus, locationsCount, mainContact, totalOrders, totalSales }) => ({
    id,
    name,
    orderingStatus,
    locationsCount,
    mainContact,
    totalOrders,
    totalSales,
  }),
);

export const COMPANY_SUMMARY: DatasetSummary[] = [
  { label: 'Companies', value: `${COMPANIES.length} companies` },
  {
    label: 'Average order volume',
    value: `$${Math.round(
      COMPANIES.reduce((sum, company) => sum + company.totalSales, 0) / COMPANIES.length,
    ).toLocaleString()}`,
    tone: 'primary',
  },
];

export const getCompanyById = (companyId: string): Company | undefined =>
  COMPANIES.find((company) => company.id === companyId);

export const getCompanySummaryById = (companyId: string): CompanySummary | undefined =>
  COMPANY_INDEX.find((company) => company.id === companyId);

export const getCompanyContact = (companyId: string, contactId: string) =>
  getCompanyById(companyId)?.contacts.find((contact) => contact.id === contactId);
